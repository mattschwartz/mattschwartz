<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/png" href="../img/favicon.png">

    <title>StoneEngine</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">
    <link href="../css/owl.carousel.css" rel="stylesheet">
    <link href="../css/owl.theme.css" rel="stylesheet">
    <link href="../css/owl.transitions.css" rel="stylesheet">
    <link href="css/site.css" rel="stylesheet">
    <link href="../css/helpers.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
    rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">cassii.us</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="#source">Source Code</a>
                    </li>
                    <li>
                        <a href="#structure">Structure</a>
                    </li>
                    <li>
                        <a href="#gom">Game Object Management</a>
                    </li>
                    <li>
                        <a href="#event">Event Dispatching</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../img/portfolio/stonequestPreview.png')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="site-heading">
                        <h1>StoneEngine</h1>
                        <hr class="small">
                        <span class="subheading">A 2D game engine written and designed<br> by Matt Schwartz</span>
                    </div>
                </div>
            </div>
        </div>
        </header>

        <!-- Main Content -->
        <div class="container">
            <div class="row">
                <div id="about" class="col-md-8 col-md-offset-2">
                    <section id="source">
                        <h1>Source Code</h1>
                        <p>
                            StoneEngine is still in a very early stage of development and is still missing a handful of
                            features. I have not yet decided if I want to make public StoneEngine's source code. However,
                            here I will show off some key features of the engine and some samples of code.
                        </p>
                    </section>
                    
                    <section id="structure">
                        <h1>Structure</h1>
                        <p>
                            The engine I am writing to power StoneQuest (StoneEngine) makes use of several SDL 2.0 libraries and is written
                            in C++. All artwork and sound has also been done by myself. 
                            <ul>
                                <li>SDL</li>
                                <li>SDL Image</li>
                                <li>SDL Mixer (for sound)</li>
                                <li>SDL TTF (font library)</li>
                            </ul>
                        </p>
                        <p>
                            The core of the engine is not finished, but several main features have been engineered
                            and implemented:
                            <ul>
                                <li>Game object and component life management, using Actors and a Director</li>
                                <li>Subscriber-based event dispatch and handling</li>
                                <li>Keyboard input handling, which utilizes my dispatch handler</li>
                            </ul>
                        </p>
                        <hr>
                    </section>
                    
                    <section id="gom">
                        <h1>Game Object Management</h1>
                        <p>
                            I have worked on games in Unity 4 and Epic's UE4 and have been inspired by both 
                            engine's architecture when making design decisions in the engine I am writing for
                            StoneQuest. Since UE4's source code is publicly available now, I would like to 
                            make it clear that all code written in StoneQuest has been my own; I have not copied
                            any code from UE4. Code that I have used from other developers have been appropriately 
                            credited. 
                        </p>
                        
                        <h3>Director</h3>
                        <p>
                            For game object management in StoneEngine, I have decided on a theater-esque pattern. 
                            <code>Actor</code>s are <i>cast</i> by a <code>Director</code> and are instructed to
                            <i>perform</i> when the game updates. 
                        </p>
                        <p>
                            Here is a simple example that shows the creation of an actor and the casting of that
                            actor onto the stage (the game):
<pre>Director& director = Director::only();
MyActor* myActor = new MyActor(...);

director.castActor(myActor);</pre>
                        </p>
                        
                        <h3>Actor</h3>
                        <p>
                            Like UE4, I decided to name my game object's <code>Actor</code>s. And like both UE4 and
                            Unity, my <code>Actor</code>s can be attached to each other, and <code>Component</code>s
                            can be attached to them. The difference between actors and components is that actors are
                            always updated independently, managed by the director, while components are updated by
                            the actors to which they are attached instead of the director, directly; and when actors
                            are dismissed, all its components are likewise destroyed, but any actors attached to it are
                            not.
                        </p> 
                        <p>
                            Here is the header file for my <code>Actor</code> abstract class:
<pre>#ifndef _ACTOR_H_
#define _ACTOR_H_

#include &lt;vector&gt;

class Vector2;
class Component;
class Renderer;
class Layer;
struct TickArgs;

class Actor {
private:
    Actor(const Actor&amp;);
    Actor&amp; operator=(const Actor&amp;);
    void removeChild(Actor*);
    
protected:
    bool _dismiss;
    Layer* _renderingLayer;
    Vector2* _location;
    Actor* _parent;
    std::vector&lt;Actor*&gt; _children;
    std::vector&lt;Component*&gt; _components;
    
public:
    bool bCanEverTick;
    bool bCanEverRender;
    bool bAcceptsInput;
    
    Actor(int x = 0, int y = 0, Actor* parent = nullptr);
    virtual ~Actor() = 0;
    
    bool shouldDismiss() const;
    void dismiss();
    Vector2 getRelativeLocation() const;
    Vector2 getWorldLocation() const;
    void translate(const float&amp; dx, const float&amp; dy);
    void setRelativeLocation(const Vector2&amp;);
    void setWorldLocation(Vector2);
    
    const Layer renderLayer() const;
    void setRenderLayer(const std::string&amp;);
    void setParent(Actor*);
    void addComponent(Component*);
    void removeComponent(const Component*);
    virtual void tick(const TickArgs&amp;);
    virtual void render(const TickArgs&amp;, const Renderer&amp;);
};

#endif // _ACTOR_H_</pre>
                        </p>
                        <hr>
                    </section>
                    
                    <section id="event">
                        <h1>Event Dispatcher &amp; Subscriptions</h1>
                        <p>
                            The coolest feature I engineered and implemented for StoneEngine so far is a
                            means of communicating between objects using a subscription-based event handler.
                            UE4 makes use of a similar design. This model is built using several core components:
                            <ul>
                                <li>EventArgs
                                    <br>
                                    A struct type used for passing arbitrary data about an <code>Event</code> from the
                                    <code>EventDispatcher</code> to a <code>Subscriber</code>. Example:
                                    <pre>struct MyEventArgsType : public EventArgs { ... }
...
SomeEventArgsType args = { ... };
EventDispatcher::only().dispatch("MyEvent", &args);
...</pre>
                                </li>
                                <li>Subscription
                                    <br>
                                    A subscription is a simple binding between an event name (a string literal) and
                                    a method. The method must return void and take as one argument a constant pointer
                                    to an <code>EventArgs</code> type. 
                                </li>
                                <li>Subscriber
                                    <br>
                                    The subscriber is an abstraction that "listens" to events and performs  
                                    the subscription's action when those events occur. Subscribers manage a list
                                    of <code>Subscription</code>s. As an example, the <code>MyActor</code> class
                                    wishes to subscribe to the "MyEvent" event. To do so, we simply write:
                                    <pre>_subscriber.bindAction("MyEvent", this, MyActor::functionName);</pre>
                                </li>
                                <li>Event Dispatcher
                                    <br>
                                    The <code>EventDispatcher</code> class handles all subscribers and events, notifying
                                    subscribers when an event to which they have subscribed has been raised. When an event
                                    is triggered and a subscriber notified, it queues up the event to be processed during
                                    updates. The subscriber is given a certain amount of time to process events and if any
                                    events are left unprocessed after its allotted time has expired, those events must wait
                                    until the next update. 
                                </li>
                            </ul>
                        </p>
                    </section>
                </div>
            </div>
        </div>

        <hr>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <ul class="hidden list-inline text-center">
                            <li>
                                <a href="#">
                                    <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/mattschwartz">
                                    <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                                </a>
                            </li>
                        </ul>
                        <p class="copyright text-muted">Copyright &copy; Matt Schwartz 2015</p>
                        <p class="copyright text-muted">Site design template from <a href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a></p>
                    </div>
                </div>
            </div>
        </footer>

        <!-- jQuery -->
        <script src="js/jquery.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="js/clean-blog.min.js"></script>
        <script src="../js/owl.carousel.min.js"></script>

        <!-- Main Page's JavaScript -->
        <script src="js/main.js"></script>

</body>

</html>